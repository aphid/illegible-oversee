<!doctype html>
<html>

<head>
  <script src="lib/moment.min.js"></script>
  <script src="committee.js"></script>
 
  <link rel="stylesheet" href="style.css" type="text/css">
  <script src="lib/socket.io.dev.js"></script>
</head>

<body>
  <section class="screen">
	  <section id="stats"></section>
    <section id="monitor">
    </section>
    <section id="ext">
    </section>

    <section id="det">
    </section>
  </section>

</body>
<script src="ssci.js"></script>
<script>/*
  var monitor = document.querySelector('#monitor');

  var ext = document.querySelector('#ext');
  var det = document.querySelector('#det');

  var socket = io(':9080', { secure: true });
  socket.on('message', function (data) {
    var art = document.createElement('article');
    if (typeof data === "string") {
      art.textContent = data;
    } else {
      art.textContent = JSON.stringify(data);
      art.style.whiteSpace = "pre";
    }
    monitor.appendChild(art);
    if (monitor.querySelectorAll('article').length > 200) {
      monitor.removeChild(monitor.querySelector('article'));
    }
    monitor.scrollTop = monitor.scrollHeight;
  });

  socket.on('url', function (data) {
    //console.log(data);
    var title, target, img;
    ext.textContent = "";
    if (data.title) {
      title = data.title;
      var titleDiv = document.createElement('div');
      titleDiv.classList.add('imgtitle');
      titleDiv.textContent = title;
      ext.appendChild(titleDiv);
    }
    img = document.createElement('img');
    img.classList.add('webshot');

    ext.appendChild(img);
    img.style.display = "block";
    if (data.url.includes("jpg") || data.url.includes("png")){
      target = data.url;
      console.log(data.url);	
    } else {
    target = 'images/' + data.url + '.jpg';
    }
    img.src = target;
    img.alt = target + "_" + title;

  });

  socket.on('load', function(data){

    window.location.assign(data);

 });

  socket.on('txt', function (data) {
    ext.textContent = data;
  });

  socket.on('detail', function (data) {
    //console.log(data);
    var art = document.createElement('article');
    if (typeof data === "string") {
      art.textContent = data;
    } else {
      art.textContent = JSON.stringify(data);
      art.style.whiteSpace = "pre";
    }
    det.appendChild(art);
    if (det.querySelectorAll('article').length > 10) {
      det.removeChild(det.querySelectorAll('article')[0]);
    }
    det.scrollTop = det.scrollHeight;
  });


  socket.once('connect', function () {
    document.querySelector('html').classList.add("wait");
  });

  socket.on('disconnect', function () {
    document.querySelector('html').classList.remove("wait");
  });




  Hearing.prototype.draw = function () {
    var hearSecs = document.querySelectorAll('.hearing');
    for (var i = 0; i < hearSecs.length; i++) {
      if (hearSecs[i].dataset.shortdate === hearSecs) {
        //it already exists, but might need to be updated?
      } else {
        var sec = document.createElement('section');
        sec.classList.add('hearing');
        sec.dataset.shortdate = this.shortdate;
        var title = document.createElement('h1');
        title.textContent = this.title;
        sec.appendChild(title);
        document.body.appendChild(sec);
      }
    }

  };


  var intel = new Committee({
    committee: "Intelligence",
    chamber: "senate",
    url: "http://www.intelligence.senate.gov",
    hearingIndex: "http://www.intelligence.senate.gov/hearings/open",
    shortname: "intel"
  });

  socket.on('hearing', function (hearing) {
    var hear = intel.addHearing(hearing);
    hear.draw();
  }); */
</script>

</html>

